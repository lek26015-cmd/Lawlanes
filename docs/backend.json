
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "role": {
          "type": "string",
          "enum": ["customer", "lawyer", "admin"],
          "description": "The role of the user within the application."
        },
        "type": {
          "type": "string",
          "enum": ["บุคคลทั่วไป", "SME"]
        },
        "registeredAt": {
            "type": "string",
            "format": "date-time"
        },
        "status": {
            "type": "string",
            "enum": ["active", "suspended"]
        },
        "avatar": {
            "type": "string",
            "format": "uri"
        }
      },
      "required": ["uid", "name", "email", "role"]
    },
    "LawyerProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LawyerProfile",
      "type": "object",
      "description": "Represents the profile of a lawyer in the Lawlanes application.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Firebase User ID of the lawyer. This is the unique ID generated and managed by Firebase Authentication."
        },
        "name": {
          "type": "string",
          "description": "The lawyer's full name."
        },
        "status": {
          "type": "string",
          "enum": ["approved", "pending", "rejected"]
        },
        "description": {
          "type": "string",
          "description": "A brief description of the lawyer's experience and expertise."
        },
        "specialty": {
          "type": "array",
          "items": { "type": "string" }
        },
        "imageUrl": { "type": "string", "format": "uri" },
        "imageHint": { "type": "string" },
        "joinedAt": { "type": "string", "format": "date-time" }
      },
      "required": [
        "userId",
        "name",
        "status",
        "specialty"
      ]
    },
    "Chat": {
      "title": "Chat",
      "description": "Represents a chat session between a user and a lawyer.",
      "type": "object",
      "properties": {
        "participants": {
          "type": "array",
          "items": { "type": "string" },
          "description": "An array containing the user IDs of the two participants in the chat."
        },
        "createdAt": { "type": "string", "format": "date-time" },
        "caseTitle": { "type": "string" },
        "status": {
          "type": "string",
          "enum": ["active", "closed", "pending_payment"]
        },
        "slipUrl": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": [ "participants", "createdAt" ]
    },
    "ChatMessage": {
      "title": "ChatMessage",
      "description": "Represents a single message within a chat.",
      "type": "object",
      "properties": {
        "senderId": { "type": "string" },
        "text": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": [ "senderId", "text", "timestamp" ]
    },
    "Appointment": {
      "title": "Appointment",
      "description": "Represents a consultation appointment request from a user to a lawyer.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "lawyerId": { "type": "string" },
        "lawyerName": { "type": "string" },
        "lawyerImageUrl": { "type": "string" },
        "appointmentDate": { "type": "string", "format": "date-time" },
        "description": { "type": "string" },
        "status": { "type": "string", "enum": [ "pending", "confirmed", "cancelled", "pending_payment" ] },
        "createdAt": { "type": "string", "format": "date-time" },
        "slipUrl": {
          "type": "string",
          "format": "uri"
        }
      },
      "required": [ "userId", "lawyerId", "appointmentDate", "description", "status" ]
    },
    "Article": {
        "title": "Article",
        "type": "object",
        "properties": {
            "title": { "type": "string" },
            "slug": { "type": "string" },
            "description": { "type": "string" },
            "content": { "type": "string" },
            "category": { "type": "string" },
            "imageUrl": { "type": "string", "format": "uri" },
            "imageHint": { "type": "string" },
            "publishedAt": { "type": "string", "format": "date-time" },
            "authorName": { "type": "string" }
        },
        "required": ["title", "slug", "content", "category", "publishedAt"]
    },
    "Ad": {
        "title": "Ad",
        "type": "object",
        "properties": {
             "title": { "type": "string" },
             "description": { "type": "string" },
             "placement": { "type": "string", "enum": ["Homepage Carousel", "Lawyer Page Sidebar"] },
             "status": { "type": "string", "enum": ["active", "draft", "expired"] },
             "imageUrl": { "type": "string", "format": "uri" },
             "imageHint": { "type": "string" }
        },
        "required": ["title", "placement", "status", "imageUrl"]
    },
    "Ticket": {
        "title": "Ticket",
        "type": "object",
        "properties": {
            "caseId": { "type": "string" },
            "userId": { "type": "string" },
            "problemType": { "type": "string" },
            "description": { "type": "string" },
            "status": { "type": "string", "enum": ["pending", "resolved"] },
            "reportedAt": { "type": "string", "format": "date-time" }
        },
        "required": ["userId", "problemType", "status", "reportedAt"]
    }
  },
  "auth": {
    "providers": [ "emailPassword", "anonymous", "google.com" ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "schema": { "$ref": "#/entities/UserProfile" } }
      },
      {
        "path": "/lawyerProfiles/{lawyerId}",
        "definition": { "schema": { "$ref": "#/entities/LawyerProfile" } }
      },
      {
        "path": "/chats/{chatId}",
        "definition": { "schema": { "$ref": "#/entities/Chat" } },
        "subcollections": [
          {
            "path": "messages/{messageId}",
            "definition": { "schema": { "$ref": "#/entities/ChatMessage" } }
          }
        ]
      },
      {
        "path": "/appointments/{appointmentId}",
        "definition": { "schema": { "$ref": "#/entities/Appointment" } }
      },
      {
        "path": "/articles/{articleId}",
        "definition": { "schema": { "$ref": "#/entities/Article" } }
      },
      {
        "path": "/ads/{adId}",
        "definition": { "schema": { "$ref": "#/entities/Ad" } }
      },
      {
        "path": "/tickets/{ticketId}",
        "definition": { "schema": { "$ref": "#/entities/Ticket" } }
      }
    ]
  }
}
