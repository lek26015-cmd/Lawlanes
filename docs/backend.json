{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "role": {
          "type": "string",
          "enum": ["customer", "lawyer", "admin"],
          "description": "The role of the user within the application."
        }
      },
      "required": ["uid", "name", "email", "role"]
    },
    "LawyerProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LawyerProfile",
      "type": "object",
      "description": "Represents the profile of a lawyer in the Lawlanes application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the lawyer profile."
        },
        "userId": {
          "type": "string",
          "description": "Firebase User ID of the lawyer. This is the unique ID generated and managed by Firebase Authentication."
        },
        "name": {
          "type": "string",
          "description": "The lawyer's full name."
        },
        "status": {
          "type": "string",
          "description": "The status of the lawyer's profile (e.g., 'approved', 'pending')."
        },
        "description": {
          "type": "string",
          "description": "A brief description of the lawyer's experience and expertise."
        },
        "specialty": {
          "type": "string",
          "description": "The lawyer's area of specialization (e.g., 'SME Fraud Cases', 'Civil and Commercial Law')."
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "status",
        "description",
        "specialty"
      ]
    },
    "Chat": {
      "title": "Chat",
      "description": "Represents a chat session between a user and a lawyer.",
      "type": "object",
      "properties": {
        "participants": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "An array containing the user IDs of the two participants in the chat."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the chat was created."
        }
      },
      "required": [
        "participants",
        "createdAt"
      ]
    },
    "ChatMessage": {
      "title": "ChatMessage",
      "description": "Represents a single message within a chat.",
      "type": "object",
      "properties": {
        "senderId": {
          "type": "string",
          "description": "The user ID of the message sender."
        },
        "text": {
          "type": "string",
          "description": "The text content of the message."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the message was sent."
        }
      },
      "required": [
        "senderId",
        "text",
        "timestamp"
      ]
    },
    "Appointment": {
      "title": "Appointment",
      "description": "Represents a consultation appointment request from a user to a lawyer.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the user requesting the appointment."
        },
        "lawyerId": {
          "type": "string",
          "description": "The ID of the lawyer the appointment is with."
        },
        "appointmentDate": {
          "type": "string",
          "format": "date-time",
          "description": "The requested date and time for the appointment."
        },
        "description": {
          "type": "string",
          "description": "A brief description of the legal issue to be discussed."
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "confirmed",
            "cancelled",
            "completed"
          ],
          "description": "The status of the appointment."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "The timestamp when the appointment was requested."
        }
      },
      "required": [
        "userId",
        "lawyerId",
        "appointmentDate",
        "description",
        "status",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "emailPassword",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
            "entityName": "UserProfile",
            "schema": {
                "$ref": "#/entities/UserProfile"
            },
            "description": "Stores user profile information, including their role."
        }
      },
      {
        "path": "/lawyerProfiles/{lawyerProfileId}",
        "definition": {
          "entityName": "LawyerProfile",
          "schema": {
            "$ref": "#/entities/LawyerProfile"
          },
          "description": "Stores lawyer profiles, accessible for reading by all users if status is 'approved'. Includes the userId field for owner-based rules.",
          "params": [
            {
              "name": "lawyerProfileId",
              "description": "Unique identifier for the lawyer profile."
            }
          ]
        }
      },
      {
        "path": "/chats/{chatId}",
        "definition": {
          "entityName": "Chat",
          "schema": {
            "$ref": "#/entities/Chat"
          },
          "description": "Stores chat sessions between users and lawyers.",
          "params": [
            {
              "name": "chatId",
              "description": "Unique identifier for the chat session."
            }
          ],
          "subcollections": [
            {
              "path": "messages/{messageId}",
              "definition": {
                "entityName": "ChatMessage",
                "schema": {
                  "$ref": "#/entities/ChatMessage"
                },
                "description": "Stores individual messages within a chat session.",
                "params": [
                  {
                    "name": "messageId",
                    "description": "Unique identifier for the message."
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  }
}
